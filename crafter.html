<!DOCTYPE html>
<html>
<head>
<title>Крафтим шмотки</title>
<script type="text/javascript">
		var mass2 = [];
		var mass = [
    		["yasha","blm","basher"], 
            ["agil","mec","javelin"],
            ["recyasha","ryb","belt"],
            ["bend","palt","recbash"],
        ];
        
		function allowDrop(ev) {
            if(ev.target.innerHTML==false){
            	if(ev.target.id==false){
            		ev.preventDefault();
                }
            }
        }

        function drag(ev) {  
        	for(var j=0;j<2;j++){
        		for(var n=0;n<6;n++){
        			document.getElementById("tables2").rows[j].cells[n].style.backgroundColor = "#FFFFFF";
                }
            }
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            var sovpalo=0;
            var kolvovstolbce=0;
            var nomerstolbca;
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            ev.target.appendChild(document.getElementById(data));
            mass2[mass2.length] = document.getElementById(data).id;
            for(var i=1; i<mass.length; i++){
            	for(var j=0; j<mass.length; j++){
                	if(document.getElementById(data).id==mass[i][j]){
                    	nomerstolbca = j;
                    }                    	
                }
            }
            for(var i=1; i<mass.length; i++){
            	if(mass[i][nomerstolbca]>""){
                	kolvovstolbce++;
                }
           	}
			for(var i=0; i<2; i++){
            	for(var j=0; j<3; j++){
                	for(var n=1; n<mass.length; n++){
                    	if(document.getElementById("tables").rows[i].cells[j].childNodes.length > 0){
							if(document.getElementById("tables").rows[i].cells[j].firstElementChild.id==mass[n][nomerstolbca]){
                        		sovpalo++;
                        	}
                        }
                    }
                }
            }
            //alert('kolvo '+kolvovstolbce)
            //alert('sovpalo '+sovpalo)
            if(kolvovstolbce==sovpalo){
            	for(var i=0; i<2; i++){
            		for(var j=0; j<3; j++){
                		for(var n=1; n<mass.length; n++){
                    		if(document.getElementById("tables").rows[i].cells[j].childNodes.length > 0){
								if(document.getElementById("tables").rows[i].cells[j].firstElementChild.id==mass[n][nomerstolbca]){
                        			while (document.getElementById("tables").rows[i].cells[j].firstChild){
                						document.getElementById("tables").rows[i].cells[j].removeChild(document.getElementById("tables").rows[i].cells[j].firstChild);
                					}	
                        		}
                        	}
                    	}
                	}
           		}
                ev.target.appendChild(document.getElementById(mass[0][nomerstolbca]));
            	//alert(mass[0][nomerstolbca])
            }         
        }
        
        function clicker(ev) {
        	var danet=0;
        	var o;
        	//alert(ev.target.id)
        	for(var i=0; i<mass.length; i++){
            	if(mass[0][i]==ev.target.id){
                	o=i;
                    break;
                }
            }
			for(var j=0;j<2;j++){
               for(var n=0;n<6;n++){   
                   for(i=1; i<mass.length; i++){
                    	if(document.getElementById("tables2").rows[j].cells[n].childNodes.length > 0){
                    		if(document.getElementById("tables2").rows[j].cells[n].firstElementChild.id==mass[i][o]){
                        		document.getElementById("tables2").rows[j].cells[n].style.backgroundColor = "#FF0000";
                                break;
                        	}
                            else{
                            	document.getElementById("tables2").rows[j].cells[n].style.backgroundColor = "#FFFFFF";
                            }
                        }
                       // alert()
                    }
                }
            }
        }
        
</script>
</head>
<body>

<table border="1" align="centr" id="tables">
	<tr>
		<td height="70" width="70" ondragover="allowDrop(event)" ondrop="drop(event)"></td>
        <td height="70" width="70" ondragover="allowDrop(event)" ondrop="drop(event)"></td>
        <td height="70" width="70" ondragover="allowDrop(event)" ondrop="drop(event)"></td>
	</tr>
    	<td height="70" width="70" ondragover="allowDrop(event)" ondrop="drop(event)"></td>
        <td height="70" width="70" ondragover="allowDrop(event)" ondrop="drop(event)"></td>
        <td height="70" width="70" ondragover="allowDrop(event)" ondrop="drop(event)"></td>
</table>

<br>

<table id="tables2" border="1">
	<tr>
		<td align="center" height="65" width="65"><img id="javelin" src="https://dota2.ru/img/items/javelin.jpg" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60"></td>
		<td align="center" height="65" width="65"><img id="belt" src="https://dota2.ru/img/items/belt_of_strength.jpg" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60"></td>
		<td align="center" height="65" width="65"><img id="recbash" src="https://dota2.ru/img/items/recipe.jpg" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60"></td>
		<td align="center" height="65" width="65"><img id="bend" src="https://dota2.ru/img/items/band_of_elvenskin.jpg" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60"></td>
		<td align="center" height="65" width="65"><img id="agil" src="https://dota2.ru/img/items/blade_of_alacrity.jpg" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60"></td>
		<td align="center" height="65" width="65"><img id="recyasha" src="https://dota2.ru/img/items/recipe.jpg" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60"></td>
	</tr>
	<tr>
		<td align="center" height="65" width="65"><img id="mec" src="https://dota2.ru/img/items/broadsword.jpg" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60"></td>
		<td align="center" height="65" width="65"><img id="ryb" src="https://dota2.ru/img/items/chainmail.jpg" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60"></td>
		<td align="center" height="65" width="65"><img id="palt" src="https://dota2.ru/img/items/robe_of_the_magi.jpg" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60"></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
</table>

<br>

<img onclick="clicker(event)" id="yasha" src="https://dota2.ru/img/items/yasha.jpg" draggable="false" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60">
<img onclick="clicker(event)" id="blm" src="https://dota2.ru/img/items/blade_mail.jpg" draggable="false" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60">
<img onclick="clicker(event)" id="basher" src="https://dota2.ru/img/items/skull_basher.jpg" draggable="false" ondragstart="drag(event)" ondragover="allowDrop(event)" width="60" height="60">

</body>
</html>
